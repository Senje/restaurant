!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("Navigo",[],n):"object"==typeof exports?exports.Navigo=n():t.Navigo=n()}("undefined"!=typeof self?self:this,function(){return function(){"use strict";var e={407:function(t,n,e){e.d(n,{default:function(){return o}});var u=/([:*])(\w+)/g,h=/\*/g,f=/\/\?/g;function O(t){return void 0===t&&(t="/"),E()?location.pathname+location.search+location.hash:t}function w(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function L(t){return"string"==typeof t}function b(t){return t&&0<=t.indexOf("#")&&t.split("#").pop()||""}function A(t){t=w(t).split(/\?(.*)?$/);return[w(t[0]),t.slice(1).join("")]}function P(t){for(var n={},e=t.split("&"),o=0;o<e.length;o++){var r,i=e[o].split("=");""!==i[0]&&(n[r=decodeURIComponent(i[0])]?(Array.isArray(n[r])||(n[r]=[n[r]]),n[r].push(decodeURIComponent(i[1]||""))):n[r]=decodeURIComponent(i[1]||""))}return n}function R(t,n){var e=A(w(t.currentLocationPath)),o=e[0],e=e[1],r=""===e?null:P(e),i=[];if(L(n.path)){if(c="(?:/^|^)"+w(n.path).replace(u,function(t,n,e){return i.push(e),"([^/]+)"}).replace(h,"?(?:.*)").replace(f,"/?([^/]+|)")+"$",""===w(n.path)&&""===w(o))return{url:o,queryString:e,hashString:b(t.to),route:n,data:null,params:r}}else c=n.path;var a,s,c=new RegExp(c,""),c=o.match(c);return!!c&&(a=L(n.path)?(a=c,0!==(s=i).length&&a?a.slice(1,a.length).reduce(function(t,n,e){return(t=null===t?{}:t)[s[e]]=decodeURIComponent(n),t},null):null):c.groups||c.slice(1),{url:w(o.replace(new RegExp("^"+t.instance.root),"")),queryString:e,hashString:b(t.to),route:n,data:a,params:r})}function S(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function a(t,n){return void 0===t[n]||!0===t[n]}function E(){return"undefined"!=typeof window}function H(t,n,e){var o=n||{},r=0;!function n(){t[r]?Array.isArray(t[r])?(t.splice.apply(t,[r,1].concat(t[r][0](o)?t[r][1]:t[r][2])),n()):t[r](o,function(t){void 0===t||!0===t?(r+=1,n()):e&&e(o)}):e&&e(o)}()}function x(t,n){void 0===t.currentLocationPath&&(t.currentLocationPath=t.to=O(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),n()}function j(t,n){for(var e=0;e<t.instance.routes.length;e++){var o=R(t,t.instance.routes[e]);if(o&&(t.matches||(t.matches=[]),t.matches.push(o),"ONE"===t.resolveOptions.strategy))return void n()}n()}function C(t,n){t.navigateOptions&&(void 0!==t.navigateOptions.shouldResolve&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),void 0!==t.navigateOptions.silent&&console.warn('"silent" is deprecated. Please check the documentation.')),n()}function N(t,n){!0===t.navigateOptions.force?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),n(!1)):n()}H.if=function(t,n,e){return[t,n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e]]};var r=E(),i=S();function U(n,t){var e,o;a(n.navigateOptions,"updateBrowserURL")&&(e=("/"+n.to).replace(/\/\//g,"/"),o=r&&n.resolveOptions&&!0===n.resolveOptions.hash,i?(history[n.navigateOptions.historyAPIMethod||"pushState"](n.navigateOptions.stateObj||{},n.navigateOptions.title||"",o?"#"+e:e),location&&location.hash&&(n.instance.__freezeListening=!0,setTimeout(function(){var t;o||(t=location.hash,location.hash="",location.hash=t),n.instance.__freezeListening=!1},1))):r&&(window.location.href=n.to)),t()}function s(i,t){var n=i.instance;n.lastResolved()?H(n.lastResolved().map(function(r){return function(t,n){var e,o;r.route.hooks&&r.route.hooks.leave&&(e=i.instance.matchLocation(r.route.path,i.currentLocationPath,o=!1),o="*"!==r.route.path?!e:!(i.matches&&i.matches.find(function(t){return r.route.path===t.route.path})),a(i.navigateOptions,"callHooks")&&o)?H(r.route.hooks.leave.map(function(e){return function(t,n){return e(function(t){!1===t?i.instance.__markAsClean(i):n()},i.matches&&0<i.matches.length?1===i.matches.length?i.matches[0]:i.matches:void 0)}}).concat([function(){return n()}])):n()}}),{},function(){return t()}):t()}function c(t,n){a(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),n()}var l=[function(n,t){var e=n.instance.lastResolved();e&&e[0]&&e[0].route===n.match.route&&e[0].url===n.match.url&&e[0].queryString===n.match.queryString?(e.forEach(function(t){t.route.hooks&&t.route.hooks.already&&a(n.navigateOptions,"callHooks")&&t.route.hooks.already.forEach(function(t){return t(n.match)})}),t(!1)):t()},function(o,t){o.match.route.hooks&&o.match.route.hooks.before&&a(o.navigateOptions,"callHooks")?H(o.match.route.hooks.before.map(function(e){return function(t,n){return e(function(t){!1===t?o.instance.__markAsClean(o):n()},o.match)}}).concat([function(){return t()}])):t()},function(t,n){a(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),n()},function(n,t){n.match.route.hooks&&n.match.route.hooks.after&&a(n.navigateOptions,"callHooks")&&n.match.route.hooks.after.forEach(function(t){return t(n.match)}),t()}],q=[s,function(t,n){var e,o,r,i=t.instance._notFoundRoute;i&&(t.notFoundHandled=!0,r=(e=A(t.currentLocationPath))[0],e=e[1],o=b(t.to),i.path=w(r),r={url:i.path,queryString:e,hashString:o,data:null,route:i,params:""!==e?P(e):null},t.matches=[r],t.match=r),n()},H.if(function(t){return t.notFoundHandled},l.concat([c]),[function(t,n){t.resolveOptions&&!1!==t.resolveOptions.noMatchWarning&&void 0!==t.resolveOptions.noMatchWarning||console.warn('Navigo: "'+t.currentLocationPath+"\" didn't match any of the registered routes."),n()},function(t,n){t.instance._setCurrent(null),n()}])];function p(){return(p=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e,o=arguments[n];for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t}).apply(this,arguments)}function F(n,e){var o=0;s(n,function t(){o!==n.matches.length?H(l,p({},n,{match:n.matches[o]}),function(){o+=1,t()}):c(n,e)})}function I(t){t.instance.__markAsClean(t)}function M(){return(M=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e,o=arguments[n];for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t}).apply(this,arguments)}var T="[data-navigo]";function o(t,n){var a,o=n||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:T},s=this,c="/",e=null,u=[],h=!1,r=S(),i=E();function f(t){return t=0<=t.indexOf("#")?!0===o.hash?t.split("#")[1]||"/":t.split("#")[0]:t}function l(t){return w(c+"/"+w(t))}function p(t,n,e,o){return t=L(t)?l(t):t,{name:o||w(String(t)),path:t,handler:n,hooks:(void 0===r&&(r={}),(o=void 0===(o=e)?[]:o).filter(function(t){return t}).forEach(function(n){["before","after","already","leave"].forEach(function(t){n[t]&&(r[t]||(r[t]=[]),r[t].push(n[t]))})}),r)};var r}function d(t,n){var e;if(!s.__dirty)return s.__dirty=!0,t=t?w(c)+"/"+w(t):void 0,e={instance:s,to:t,currentLocationPath:t,navigateOptions:{},resolveOptions:M({},o,n)},H([x,j,H.if(function(t){t=t.matches;return t&&0<t.length},F,q)],e,I),!!e.matches&&e.matches;s.__waiting.push(function(){return s.resolve(t,n)})}function v(t,n){var e;s.__dirty?s.__waiting.push(function(){return s.navigate(t,n)}):(s.__dirty=!0,t=w(c)+"/"+w(t),e={instance:s,to:t,navigateOptions:n||{},resolveOptions:n&&n.resolveOptions?n.resolveOptions:o,currentLocationPath:f(t)},H([C,N,j,H.if(function(t){t=t.matches;return t&&0<t.length},F,q),U,I],e,I))}function g(){if(i)return(i?[].slice.call(document.querySelectorAll(o.linksSelector||T)):[]).forEach(function(a){"false"!==a.getAttribute("data-navigo")&&"_blank"!==a.getAttribute("target")?a.hasListenerAttached||(a.hasListenerAttached=!0,a.navigoHandler=function(t){if((t.ctrlKey||t.metaKey)&&"a"===t.target.tagName.toLowerCase())return!1;if(null==(e=a.getAttribute("href")))return!1;if(e.match(/^(http|https)/)&&"undefined"!=typeof URL)try{var n=new URL(e),e=n.pathname+n.search}catch(t){}var o,r,i=(n=a.getAttribute("data-navigo-options"))?(n=n.split(","),r={},n.forEach(function(t){var n=t.split(":").map(function(t){return t.replace(/(^ +| +$)/g,"")});switch(n[0]){case"historyAPIMethod":r.historyAPIMethod=n[1];break;case"resolveOptionsStrategy":(o=o||{}).strategy=n[1];break;case"resolveOptionsHash":(o=o||{}).hash="true"===n[1];break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":r[n[0]]="true"===n[1]}}),o&&(r.resolveOptions=o),r):{};h||(t.preventDefault(),t.stopPropagation(),s.navigate(w(e),i))},a.addEventListener("click",a.navigoHandler)):a.hasListenerAttached&&a.removeEventListener("click",a.navigoHandler)}),s}function m(n,t,e){var o=u.find(function(t){return t.name===n}),r=null;if(o){if(r=o.path,t)for(var i in t)r=r.replace(":"+i,t[i]);r=r.match(/^\//)?r:"/"+r}return r=r&&e&&!e.includeRoot?r.replace(new RegExp("^/"+c),""):r}function y(t){var n=A(w(t)),e=n[0],n=n[1],o=""===n?null:P(n);return{url:e,queryString:n,hashString:b(t),route:p(e,function(){},[a],e),data:null,params:o}}function _(t,n,e){return(n="string"==typeof n?k(n):n)?(n.hooks[t]||(n.hooks[t]=[]),n.hooks[t].push(e),function(){n.hooks[t]=n.hooks[t].filter(function(t){return t!==e})}):(console.warn("Route doesn't exists: "+n),function(){})}function k(n){return"string"==typeof n?u.find(function(t){return t.name===l(n)}):u.find(function(t){return t.handler===n})}t?c=w(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.'),this.root=c,this.routes=u,this.destroyed=h,this.current=e,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=function(t){t.instance.__dirty=!1,0<t.instance.__waiting.length&&t.instance.__waiting.shift()()},this.on=function(r,t,n){var i=this;return"object"!=typeof r||r instanceof RegExp?("function"==typeof r&&(n=t,t=r,r=c),u.push(p(r,t,[a,n]))):Object.keys(r).forEach(function(t){var n,e,o;"function"==typeof r[t]?i.on(t,r[t]):(n=(o=r[t]).uses,e=o.as,o=o.hooks,u.push(p(t,n,[a,o],e)))}),this},this.off=function(n){return this.routes=u=u.filter(function(t){return L(n)?w(t.path)!==w(n):"function"==typeof n?n!==t.handler:String(t.path)!==String(n)}),this},this.resolve=d,this.navigate=v,this.navigateByName=function(t,n,e){t=m(t,n);return null!==t&&(v(t.replace(new RegExp("^/?"+c),""),e),!0)},this.destroy=function(){this.routes=u=[],r&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=h=!0},this.notFound=function(t,n){return s._notFoundRoute=p("*",t,[a,n],"__NOT_FOUND__"),this},this.updatePageLinks=g,this.link=function(t){return"/"+c+"/"+w(t)},this.hooks=function(t){return a=t,this},this.extractGETParameters=function(t){return A(f(t))},this.lastResolved=function(){return e},this.generate=m,this.getLinkPath=function(t){return t.getAttribute("href")},this.match=function(t){t={instance:s,currentLocationPath:t,to:t,navigateOptions:{},resolveOptions:o};return j(t,function(){}),!!t.matches&&t.matches},this.matchLocation=function(t,n,e){void 0===n||void 0!==e&&!e||(n=l(n));n={instance:s,to:n,currentLocationPath:n};return x(n,function(){}),"string"==typeof t&&(t=void 0===e||e?l(t):t),R(n,{name:String(t),path:t,handler:function(){},hooks:{}})||!1},this.getCurrentLocation=function(){return y(w(O(c)).replace(new RegExp("^"+c),""))},this.addBeforeHook=_.bind(this,"before"),this.addAfterHook=_.bind(this,"after"),this.addAlreadyHook=_.bind(this,"already"),this.addLeaveHook=_.bind(this,"leave"),this.getRoute=k,this._pathToMatchObject=y,this._clean=w,this._checkForAHash=f,this._setCurrent=function(t){return e=s.current=t},function(){r&&(this.__popstateListener=function(){s.__freezeListening||d()},window.addEventListener("popstate",this.__popstateListener))}.call(this),g.call(this)}}},o={};function r(t){var n;return(o[t]||(n=o[t]={exports:{}},e[t](n,n.exports,r),n)).exports}return r.d=function(t,n){for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r(407)}().default});